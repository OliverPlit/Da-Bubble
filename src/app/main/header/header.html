<section>
    <img src="/img/logo-menu.png" alt="logo">
    <div class="mobile-header" *ngIf="isVisible">
        <img src="/img/back-mobile" alt="">
        <img src="/img/logo-menu-devspace" alt="">
    </div>
    <div class="search-container">

        <input class="search" type="text" placeholder="Devspace durchsuchen (# f√ºr Channels, @ f√ºr Personen)"
            [(ngModel)]="searchQuery" (input)="onSearchInput()" (focus)="showSearchResults = searchQuery.length > 0">


        <!-- Search Results Dropdown -->
        <div class="search-results" *ngIf="showSearchResults">
            <!-- Loading Indicator -->
            <div class="search-loading" *ngIf="isSearching">
                <p>Suche l√§uft...</p>
            </div>

            <!-- No Results -->
            <div class="no-results" *ngIf="!isSearching && searchResults.length === 0">
                <p>Keine Ergebnisse gefunden</p>
                <small>Versuche es mit # f√ºr Channels oder @ f√ºr Personen</small>
            </div>

            <!-- Results List -->
            <div class="results-list" *ngIf="!isSearching && searchResults.length > 0">
                <div class="search-result-item" *ngFor="let result of searchResults"
                    (click)="selectSearchResult(result)">

                    <!-- Channel Result -->
                    <div class="result-content" *ngIf="result.type === 'channel'">
                        <div class="result-icon channel-icon">#</div>
                        <div class="result-details">
                            <p class="result-title">{{ result.title }}</p>
                            <small class="result-subtitle">{{ result.subtitle }}</small>
                            <small class="result-meta" *ngIf="result.content">{{ result.content }}</small>
                        </div>
                    </div>

                    <!-- Direct Message Result -->
                    <div class="result-content" *ngIf="result.type === 'direct'">
                        <img class="result-avatar" [src]="'/img/avatars/' + result.avatar" alt="">
                        <div class="result-details">
                            <p class="result-title">{{ result.title }}</p>
                            <small class="result-subtitle">{{ result.subtitle }}</small>
                        </div>
                    </div>

                    <!-- Message Result -->
                    <div class="result-content" *ngIf="result.type === 'message'">
                        <div class="result-icon message-icon">üí¨</div>
                        <div class="result-details">
                            <p class="result-title">{{ result.title }}</p>
                            <small class="result-subtitle">{{ result.subtitle }}</small>
                            <p class="result-message">{{ result.content }}</p>
                            <small class="result-time" *ngIf="result.timestamp">
                                {{ result.timestamp | date:'dd.MM.yyyy HH:mm' }}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="profile-menu" (click)="openMenu()" [matMenuTriggerFor]="!isMobile ? menu : null">
        <p>{{ userName }}</p>
        <img class="profile-img" [src]="'/img/avatars/' + userAvatar" alt="">
        <span class="status-dot online"></span>
        <img src="/img/dropdown-menu.png" alt="" class="dropdown">
        <mat-menu #menu="matMenu" class="menu" xPosition="before" yPosition="below">
            <p (click)="openDialog()" class="dialog-select">Profile</p>
            <p (click)="logout()" class="dialog-select">Log out</p>
        </mat-menu>
    </div>

    <div class="mobile-menu" *ngIf="mobileMenuOpen">
        <div class="mobile-menu-content">
            <div class="menu-bar-div">
                <img src="/img/mobile-menu.png" alt="" class="menu-bar" (click)="closeMobileMenu()">
            </div>
            <div class="profile-logo">
                <img src="/img/direct-person.png" alt="">
                <p (click)="openDialog()">Profile</p>

            </div>
            <div class="profile-logo">
                <img src="/img/logout.png" alt="">
                <p (click)="logout()">Log out</p>

            </div>
        </div>
    </div>
</section>