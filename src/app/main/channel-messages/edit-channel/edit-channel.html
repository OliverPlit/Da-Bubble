<div class="add-channel-main" *ngIf="channel">
  <div class="add-channel-header">
    <h2># {{ channel.name }}</h2>
    <img src="/img/close-channel.png" alt="Schließen" (click)="close()">
  </div>
<div *ngIf="!channel" class="error-message">
  <p>Fehler: Keine Channel-Daten verfügbar</p>
  <button (click)="close()">Schließen</button>
</div>
  <!-- Edit Name Section -->
  <div *ngIf="showInputName" class="edit-name-header">
    <div class="name-header">
      <label for="name">Channel-Name</label>
      <p (click)="saveEditName()">Speichern</p>
    </div>
    <input 
      type="text" 
      id="name" 
      name="name" 
      [value]="editedName"
      (input)="editedName = $any($event.target).value"
      class="input-channel"
      (keyup.enter)="saveEditName()">
  </div>

  <div class="name-div" *ngIf="closeName">
    <div class="name-header">
      <label for="name">Channel-Name</label>
      <p (click)="toggleEditName()">Bearbeiten</p>
    </div>
    <p>{{ channel.name }}</p>
  </div>

  <!-- Edit Description Section -->
  <div *ngIf="showInputDescription">
    <div class="name-header">
      <label for="description" class="description">
        Beschreibung <span>(optional)</span>
      </label>
      <p (click)="saveEditDescription()" class="edit-description">Speichern</p>
    </div>
    <input 
      type="text" 
      id="description" 
      name="description" 
      [value]="editedDescription"
      (input)="editedDescription = $any($event.target).value"
      placeholder="Beschreibung eingeben..."
      (keyup.enter)="saveEditDescription()">
    <hr>
    <div class="created">
      <label>Erstellt von</label>
      <p>{{ channel.createdBy }}</p>
    </div>
  </div>

  <div class="beschreibung-div" *ngIf="closeDescription">
    <div class="name-header">
      <label class="description">Beschreibung</label>
      <p (click)="toggleEditDescription()" class="edit-description">Bearbeiten</p>
    </div>
    <p>{{ channel.description }}</p>
    <hr>
    <div class="created">
      <label>Erstellt von</label>
      <p>{{ channel.createdBy }}</p>
    </div>
  </div>

  <!-- Mitglieder-Sektion -->
  <div class="mitglieder-div">
    <label class="mitglieder-title">Mitglieder</label>
    <ul class="mitglieder-list">
      <li
        class="mitglieder-row"
        *ngFor="let m of orderedMembers()"
        [class.you]="isYou(m)"
      >
        <div class="avatar" [style.background-image]="m.avatar ? 'url(/img/avatars/' + m.avatar + ')' : 'none'">
          <span *ngIf="!m.avatar" class="avatar-fallback">{{ (m.name || '?').charAt(0) }}</span>
        </div>
        <span
          class="status-dot"
          [ngClass]="presence.userStatusMap()[m.uid || m.id] === 'online' ? 'online' : 'offline'"
        ></span>
        <span class="name">{{ m.name }}{{ isYou(m) ? ' (Du)' : '' }}</span>
      </li>
    </ul>
    <div class="mitglieder-add" (click)="openAddMembers()">
      <span class="icon-box">
        <img class="default" src="/img/person_add.png" alt="">
        <img class="hover" src="/img/person_add_purple.png" alt="">
      </span>
      <span>Mitglieder hinzufügen</span>
    </div>
  </div>

  <div class="add-button">
    <button (click)="leaveChannel()">Channel verlassen</button>
  </div>
</div>